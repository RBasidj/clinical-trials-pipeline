2025-05-14 16:57:35,888 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-14 16:57:35,888 - visualization-test - INFO - Testing matplotlib backend...
2025-05-14 16:57:35,888 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-14 16:57:35,909 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-14 16:57:36,249 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-14 16:57:36,249 - visualization-test - INFO - Testing visualization module...
2025-05-14 16:57:36,250 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-14 16:57:36,250 - visualization - INFO - Starting visualization generation in test_figures
2025-05-14 16:57:36,250 - visualization - INFO - Using matplotlib backend: Agg
2025-05-14 16:57:36,251 - visualization - INFO - Creating modality distribution pie chart
2025-05-14 16:57:36,525 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-14 16:57:36,525 - visualization - INFO - Creating trial timeline visualization
2025-05-14 16:57:36,851 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-14 16:57:36,851 - visualization - INFO - Creating enrollment distribution visualization
2025-05-14 16:57:37,097 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-14 16:57:37,097 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-14 16:57:37,324 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-14 16:57:37,324 - visualization - INFO - Creating top sponsors bar chart
2025-05-14 16:57:37,556 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-14 16:57:37,556 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-14 16:57:37,556 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-14 16:57:37,556 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-14 16:57:37,556 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-14 16:57:37,556 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-14 16:57:37,556 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-14 16:57:37,556 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-14 16:57:37,556 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-14 16:57:37,556 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-14 16:57:37,556 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-14 16:57:37,556 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-14 16:57:37,556 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-14 16:57:37,556 - visualization-test - INFO - Testing cloud storage...
2025-05-14 16:57:37,783 - visualization-test - INFO - Uploading test files for run_id: debug_run
2025-05-14 16:57:37,784 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-14 16:57:37,784 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:38,333 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:38,333 - cloud_storage - INFO - Processing directory: data
2025-05-14 16:57:38,334 - cloud_storage - INFO - Uploading data/clinical_trials.csv to debug_run/data/clinical_trials.csv
2025-05-14 16:57:38,654 - cloud_storage - INFO - Uploaded data/clinical_trials.csv with signed URL
2025-05-14 16:57:38,655 - cloud_storage - INFO - Uploading data/interventions.csv to debug_run/data/interventions.csv
2025-05-14 16:57:38,872 - cloud_storage - INFO - Uploaded data/interventions.csv with signed URL
2025-05-14 16:57:38,872 - cloud_storage - INFO - Processing directory: results
2025-05-14 16:57:38,872 - cloud_storage - INFO - Uploading results/summary.json to debug_run/results/summary.json
2025-05-14 16:57:39,379 - cloud_storage - INFO - Uploaded results/summary.json with signed URL
2025-05-14 16:57:39,380 - cloud_storage - INFO - Uploading results/report.md to debug_run/results/report.md
2025-05-14 16:57:39,616 - cloud_storage - INFO - Uploaded results/report.md with signed URL
2025-05-14 16:57:39,617 - cloud_storage - INFO - Uploading results/report.txt to debug_run/results/report.txt
2025-05-14 16:57:39,819 - cloud_storage - INFO - Uploaded results/report.txt with signed URL
2025-05-14 16:57:39,820 - cloud_storage - INFO - Processing directory: figures
2025-05-14 16:57:39,820 - cloud_storage - INFO - Uploading figures/duration_vs_enrollment.png to debug_run/figures/duration_vs_enrollment.png
2025-05-14 16:57:40,129 - cloud_storage - INFO - Uploaded figures/duration_vs_enrollment.png with signed URL
2025-05-14 16:57:40,129 - cloud_storage - INFO - Uploading figures/modality_distribution.png to debug_run/figures/modality_distribution.png
2025-05-14 16:57:40,575 - cloud_storage - INFO - Uploaded figures/modality_distribution.png with signed URL
2025-05-14 16:57:40,576 - cloud_storage - INFO - Uploading figures/top_sponsors.png to debug_run/figures/top_sponsors.png
2025-05-14 16:57:40,868 - cloud_storage - INFO - Uploaded figures/top_sponsors.png with signed URL
2025-05-14 16:57:40,868 - cloud_storage - INFO - Uploading figures/enrollment_distribution.png to debug_run/figures/enrollment_distribution.png
2025-05-14 16:57:41,131 - cloud_storage - INFO - Uploaded figures/enrollment_distribution.png with signed URL
2025-05-14 16:57:41,131 - cloud_storage - INFO - Uploading figures/trial_timeline.png to debug_run/figures/trial_timeline.png
2025-05-14 16:57:41,404 - cloud_storage - INFO - Uploaded figures/trial_timeline.png with signed URL
2025-05-14 16:57:41,404 - visualization-test - INFO - ✅ Uploaded 10 files to Cloud Storage:
2025-05-14 16:57:41,404 - visualization-test - INFO -   - data/clinical_trials.csv: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/clinical_trials.csv?Expires=1747342658&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=4GBx%2BgYLA9aiQbWp%2B7ttuDBlRykN5E0ilgjyMG6pZ4MZZEsdNWwg5h5QgVvMUNXJP46Q5UHBxi2NrUm2JkxSK%2BEDVNt4I0Q1jqGLI8xgJ5Cro1A3zv1IftDuoxCDZx4imx8nz3%2Bm9NMcHeV5BQgmIhjr%2FRA1BLSNrXzOKwXD54L47BDquP9ctAS5TZpSBjAKEmPZJc9mf5rLTJYGPO2DWZLtvtJ37TemJnvZqs5mosKv%2F9700UHKQzprQgYuBELwrrxTGog0Ng%2B50utS4L4hgv7X2OJVqC8hE5kNzM4X6pNtNxpyvxSsmQIyckMsUKF4%2BllklQo%2Bgsap6lKkzuQuNg%3D%3D
2025-05-14 16:57:41,404 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:41,833 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:42,010 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/clinical_trials.csv?Expires=1747342661&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=bQtYKZbUr0hb7XGxcgm56u%2FM6leMV4wsImMsP1tKPZf0EpDwn119zy%2B3X%2BF4uPyah4xLxlBGQ5BbCsK7Yf01DMpodzpRyFXFCRRnlIZJt90RJDYpAsuQrbaBaWaMBW53PplMHs7v9rWuTCZ9rSLy7zoPJkFiPGqFpz%2BspYGZANBwYcQKH%2BHtvIpwP%2BTfzBz709lb65RdWRhCO748vsazZBrjBp2sOmV6IOJAjqZqV1dFE7JNWiikHX6AaNSd00qTsmOK1sup59Jqwy2hOluJgic0ZZ85LamaARMkCBOqql8yPvsWpYPKue6WAdsj0wyz4FuzJci0OrduA8U2EMNL4Q%3D%3D
2025-05-14 16:57:42,010 - visualization-test - INFO -   - data/interventions.csv: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/interventions.csv?Expires=1747342658&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=boqPUrTmqsrVdWO3%2FD6dMHX%2FcevQbr5FSCtyyHUHfr3U9RXnGwmEbT6Qic0OaC3D2c3W7La6O1nQnLoSfGeApiLvbxjMFDRXhJbLU6pLoxfcITOtcI9n%2FRO9TNbOYcSiPIMV98SpYYIDVBOn1SJrdbOMwRrmoXJAgRvMtAfgpBXssmwfu8%2Fo%2FnwkotMD63gs0kVQreHjZnnzozVdGpH%2FxEl8kauqeKvgXkYwN%2FjFyRZYQN%2F7fCqxOU16wqduAAQpKtazpCKJMbi30mdFdovHrP5SWk3JVTWG58%2FSBdDsB8Y%2F1Z3Z2pBKNtLNHo1GR8n2dORX%2B9wAEzcxd3frmzpTag%3D%3D
2025-05-14 16:57:42,010 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:42,446 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:42,632 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/interventions.csv?Expires=1747342662&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=vmy7dkcTIA75NHLYhOLkrnc8ZbA47RQShZCV%2BGFUmTYpqBF28S2HFS6ApQ1YyloRRXFu77nMr1pBKQZ%2F%2BKfCXD%2FuGDy2x77MgWZDfCrXgaouGHQQG8gx9immsttZ9Zrjfi8xu%2FiFdjla%2BStuXk2VkZkrYPIISnfeB3Ll1kzNUqR7tlDF5ea5%2BWjXreQITgxTvVnaupt525Lx6RJQ0cFFXHc9p9aB7bS5wtOhiCF34AjkiOsEzlvcLtHcL%2FmnfD%2FlayFTms57YPF3HG%2B9YG1hNCJTWYwFOAASrm5boNxtP7HyIpj%2FkCXo2tWHKW6F0vLnc5YZb786%2BFvxm6xCSDti3A%3D%3D
2025-05-14 16:57:42,632 - visualization-test - INFO -   - results/summary.json: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/summary.json?Expires=1747342659&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=BTTccEosfLcxndsoCzKMhUeqebh%2FeDXrN6K8CCD%2F6AgBC4RmOPQUxIpHivK%2BNIoJS2cAwFTHGO%2FDuE3xlaZIjHYVf1KkEhnTW1n%2FzhTraTEzhLyoXgrxgEtg0weELdKQzntGOWS7u2QWrvvQqf5I6zmdCQj6y15LS3pKX3pFbOOT8A9GF5KzsFZ7PbWzws%2FPieu87uHdRVEzM5TGFtD3uyukyVN2uG%2B6QiZfhq3xr3D2fgUlMOS%2BxZa1Uis2jiiS%2FfhHYLOMpEw8Tq9wj1OH3qfKxowBs5c5IN%2B5POeiZnAzWZryb1uttG4PfB7cI7kyf2m9v5hUHzC5hyOLxingqQ%3D%3D
2025-05-14 16:57:42,633 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:43,870 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:44,512 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/summary.json?Expires=1747342664&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=baw5NGX8erx9rBC7oyzRSk%2F9v79t5kOmjwWjgT2QvYy2%2BnpSisjJeVNeysCIvEnL4PCm%2F%2FiqjIOMTS%2FV1tAp1ZOAsG2WiOpskzuRL12cUL21Y%2BKYwnSiznp9681yLIMms8mBdZjwhmo52a6lynfZlbNLZPmpSyWoT5IE0legmK8cMO8cJMqCiA%2BqHr%2BSod6ar6Z4ORcDlbj%2BAEAvFJtrM7MQ8KIelZSq%2FDyrbJ%2Fn%2FjkbJw7Bdj2VDn8i8m50VSutHP6EL4HAyans8nq5t1k5JTtw9Y8LzLAj6hM9jYHG7My7T1b%2FyT%2B2LLwv7kysfD82ONyAvOplPnxeTta0hbXmNw%3D%3D
2025-05-14 16:57:44,512 - visualization-test - INFO -   - results/report.md: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.md?Expires=1747342659&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=FvFkaNOw%2FRuBFxaD8wK%2B%2FDrW9SA3r0Asju0GqMN99haDmA7DT2zh039co7sM3wDneYByAjitwqZPwVUP%2B0VNCPNpcjHaEhewelRPQkVekRO%2FAzusLYviEPUwPpjeYJ8aoOTIH%2BX7MLH070byUtB7%2BrN3JXv3LGJQdsCNnm4fqG%2FM8D6lcYA87iLAjiNTS%2B6Kz%2FZ1mm91VW%2FrfDM8vbB8H3RQgNdhWWBZYT3qZTCjP%2FeIepew8yV0YmvomzNP2bnehdtfG7d18pfP0wdu5IL8vS5dLnyBbUTvK5KbJ53RsLqZNS8QTKcO2LY5mmJ4Am%2BmEpYY9BNA3AO8NH7yy6flxQ%3D%3D
2025-05-14 16:57:44,512 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:46,409 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:46,573 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.md?Expires=1747342666&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=YWdbIaivKhs2cWhZrBJ5hZH4ocEazC8ERE7kDYnIAEp5fb17cDFn5oODxmJwEjUvbDE%2B0Dcue8jeQNdUvaOBniWBXfzeXtw8U98qSEl70%2FuV0GyFVUiCvJ9gsycxjharW2m4M9c2h0u1fDs6WvNwuSiYsLx8n7cXQRHuC04oGfaExI3lPDuB0RZEUdVey4tS9sbtsdvVpV1EF0C8D7cXbok%2B3PhddKXiZus2N9WGnki34hLl3LyZ96C6mYFUfPHNNyCga6xcAwwTBJ9vybjLK5Uc7fAhNXaNyNceFZFoGCqs6%2FOFJLutbeOk70BS7q4YfomWM84khdZ1qOII4%2Btspw%3D%3D
2025-05-14 16:57:46,573 - visualization-test - INFO -   - results/report.txt: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.txt?Expires=1747342659&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=sJ1FLrFCi32Niu%2Fg6Gw6dGCh5CkNIV2ed12NZs5jVDE3rCnLLiGCSBPhIOQjZBUAEep8VmO9bcCFjFWBm%2BZazd6gqBf6BBa%2B8AzcYq7lxhJJMR%2BnzpYCrG83LHh7l%2Bdm57qovBAYFPGZW74v7B5UDTQF5LK9mQ4odeXLlSoUvchHsfVLebTqqJd%2FFEE610k2ZgX8WHCODzBYZh6f5q6UXD%2Ft4E6ZHkkkesJat8xfY8ZmBbCIk970cuIqJfASoAMr0WGGI2eBq4M6QjonegNLUX69%2BccPxao7oNyYCj9yFnLPR4H3gazPSvCrxieQLSXvUmt2AtxLnsJElkqKBwAQ6w%3D%3D
2025-05-14 16:57:46,573 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:47,044 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:47,235 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.txt?Expires=1747342667&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=NvkD8vtqs8zAUMgbIt0BSa7vkzHMZkiB4zfP1KCOUYlf3%2Bgq%2FiMRPQ7mkHnccNMwW0hB2ozq1AGOrskTR4kXW79Oe39AE9K8sJFpguKHWmxw%2BgxLZAfQxZg6%2BZSWyh5NBAkm335k9ftAvwAXyo9kvgVzGAIjP4AXR%2BAhX2clc1zwWdwLNLTn8u8K9qe%2F4qVdsTyzMu6rp7d6ivOgAhsroOLnM54tNHv9MgvOXUlzgytB%2Bg2NjJCf2%2FMUlYrTHmP7IWzptiX5Mk%2Bb0GKyuF%2F%2BiR8JFwtwTKlyEX76Z8uK83JLlLXXFlPtpAhyodJEk3822JXWIKzYAlGWtmscglVUdw%3D%3D
2025-05-14 16:57:47,236 - visualization-test - INFO -   - figures/duration_vs_enrollment.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/duration_vs_enrollment.png?Expires=1747342660&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=246OOI%2B%2B0ln8TBiwJ3R4vRw53JthhztkT4VGZbDq4sD7dQnRUW27jmMTARIc5II%2FwoB2oavkLMMMnk3XbP01kbNmIvQL0DlKibq4AKIIIpmRYIRP3bNqes3KcHRI38Y%2BiZEnxpWsIwYXuVeY2GEWVu1bA6ifPy%2Bm1HqeRVxylFj7PHIioU1SWaaGYtID70e%2BK35416G3IpTyzjm22EE%2Bwvv%2F0aP2%2B7%2BLxXoqb5gPJaSxOo6KVWPDRRsgGuyfHqMxCJx6G2To7vGTQNBIYQQWrwIxQlgRIqRVtEZ9QQ7%2BIKAR%2BAKCaWwkpUj02w805ag82tsVDiGQFLcyXTCvJZirBg%3D%3D
2025-05-14 16:57:47,236 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:47,804 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:48,020 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/duration_vs_enrollment.png?Expires=1747342667&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=DIB4NFvh92XPhCqAZ1llO00O%2FDMwA5RyzDx6BtiZHBzJ9gnFRjeR3S9pOgLcJOyZRfQg33VfvQt21BfbXW4DSF3uOJUZpq5CeH6ntenOLFG%2Fd4SWFzonrl8S28SrMvoTuBdVsu0AdJHL%2F1HojxsgCRoPRgGxW236PZOCqnlDnPFP9AbsIVG3l5ubOQyAnyBJqQR9gKTpO4C8bAq762WxJmjQlCBZN%2BPxPDvCrLRd6hRFaUasTW%2BEV9qoAUzUkOtZk54LGLKWTjRdUtps9j6%2B1j0VGTE%2B4vV1FSDPxaZT0LGScS9Z6C2ERLD%2FkgDPZ7KVhXyWLPKHdzw04fNSS0m8Mg%3D%3D
2025-05-14 16:57:48,020 - visualization-test - INFO -   - figures/modality_distribution.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/modality_distribution.png?Expires=1747342660&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=cX0Wgyw7bFUVJ3DTYK1lQ%2BHInZwbhI6SWwrzr7BGuLlP4fQ4Yiv68Z4xNszuvUuEfi%2FvJrIFbLy%2FzEIuI47%2BC5KQgd8fRYOSDv8LZk%2FToAmunaTVDIXCjul0wJGzDeKpPasfpT0vyalgRF%2FC0azRmJ%2BvdV8m%2BXzSRswCH%2FRX1cZ1BTOzt21s%2F37lDjsiBEwXQx9AWsV8AxlJ5N9P6ml1IiPpIcZHnOOK3pOzfO0jIakrkcB1Ge10RA1236Hhpb1iyQMKuiVNsx8KLWQC6tqzJ0kZGZ72TktT%2BFeyuggEz7nH%2Fg7KAg3iMnMSsqmhLvXJVBkqLYolHzaM9iu45%2F4KWA%3D%3D
2025-05-14 16:57:48,020 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:48,423 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:48,617 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/modality_distribution.png?Expires=1747342668&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=BkbpGxXoeiy1rXZeeJ9PG%2Bev%2Fi1QjqZAmqyzcBPi3bENl8djrBqRyKujb3KmF%2BrtC%2BxZZ%2FRiSelghFUB2Cx2vghGMVRwBJrNIOBzKok1%2BFvA1lOnfY7J%2Fzm8ajJRQxmHAGlLQlsD1d8iPkmI1R%2BKHQcU55Cmy0nbGZ8xqt8%2Bzed9hO%2FrEV44xHTwofL99yFdOYs6V9sTKNaVjEe%2B3HEukQH67c%2BBBVQkgm3x%2FhmfGIa%2BLaeSkSIw%2B3%2B%2FIb%2FglUBfUnLhhQf4Px%2FfTtq%2BqUo0dDuNllmTjDjZNxVeH04JQhuP9fwkp%2FfMmdzHXFBIi6ZOZXSQ5qjDO6mz5H%2Bsbc1XPg%3D%3D
2025-05-14 16:57:48,618 - visualization-test - INFO -   - figures/top_sponsors.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/top_sponsors.png?Expires=1747342660&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=ReN0QX%2FNLYOP1bCDbLTaq8AXhz0mvzThigQ7Vn74Fs8Lif%2FoKWCBP8z%2F%2FDUBDyMgrUF36Fk%2BCAdO9tytVe%2FcDCPTumyFctxHX2%2Bibbwwm5uCPMh5877WPS7YGltaCNC2%2BgUY8gOA%2BM5dUX9G8KWYuURPQpmMHOChFap%2F%2BkfT2AUlAYis4xT%2BVn8M%2BjmGjboToqs8cFK6H2A0D%2BUVaSTneDD%2BpyqlV%2Bc7shUrPDSj0iPuqJQNzzuFPk1Jxl%2FGoTPH1cTrSE2gWXdl1LzoGrsQJBxsP9ePR2pu3izheNSRbGvlH2Mc2m2kZlCuhoppFJw%2FlqW9sH0tVLM7iJ98hQGsjQ%3D%3D
2025-05-14 16:57:48,618 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:49,047 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:49,196 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/top_sponsors.png?Expires=1747342669&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=MWloEy4OBmO9XNWvmM5zTBcVpV75z5%2B0RGXw1KtHyMtY%2BqIh65Cx3qSZFCt%2BVZ3fs%2F6iuylyS4DgrBHFNKeGSypB0ohM8h6DOg4aUaaCjXtcT62dorPjbw3tyjqbR111qhsyCaAOTqpyJvs7lvFvMW5OamT24osoNL4JzYne6aQvSYuwMQRH49sSMa%2BaN5CvE5gZZzciGOUFuCkg6eDYsy6O%2Bpmu%2BLUMCq27%2BEN%2FDp5tZt6O%2FMaGGK9CivW98P3QG7KTGc7EBBt%2Fj%2BJ6A%2B6P565Ip%2FCH7st%2FBbzg%2B5IciBb2l8q%2FCw3kLRMeV9pZ2TvYIXooY6zbhZNfcr%2FZD45pnQ%3D%3D
2025-05-14 16:57:49,196 - visualization-test - INFO -   - figures/enrollment_distribution.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/enrollment_distribution.png?Expires=1747342661&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=wo94DXA%2BODSqdxzQQWY2kERQFXO7BsFTZAX7jZ8mJ3eXsaklERN6QbwW%2FBgJDHyZaagAWgupbYh0SJo3jONdVQct%2F5hj1UfOshsMH8Dv6Q4mIxLUSOxX9nTpNGT3fSwBaGszYURXdRJ1fXlVqA%2FMuYB%2BAp%2B9HAijNtd8MAsraXVxZJq3ychWWt1n4b2EZiAABpY567x3avEDzJn%2F0RXD%2FTWsP3dq13pg3SPRkXZWH8eAhyTzwMbgWgRRSb3EIlR5ga1ZORYUcZnLl8TgIs3sppW1cN8fhlH90rHac0qsTh6sYJfUQaXzrIJH5nSu1LZ3D42vNrIbu51mXXmnKZaV%2Bw%3D%3D
2025-05-14 16:57:49,196 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:49,671 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:49,881 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/enrollment_distribution.png?Expires=1747342669&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=pgpeHMCPBu%2BKc4QHYz8hOMMb1uvK4sJy5e3EuyHzQOs3Rb9AeenniSLAfL3VwWM6jH1La3MuP37xhQO%2Ffc0N%2FPX0TG%2FInTmNE8%2BBv%2BScuXEsBv5Y%2BdPy3VCFm1ELGRqNsvBD%2B7nm7AjqkX%2BogBNdRIyRWHNHjx7cdiEnyzfwjRZtzO14uBfgW1pAC6R218%2BIOW3xgltdntFR%2F6rj4nkIjdoT15r7Zd%2F1jFUIZGGPZQpZOPxqOCwgLT5lo%2FAZJSZmQLutDCWVHW7PT9XiKlg%2BFMOX%2BF21L3tBKPzRVkr5xAvV0ANA1UwF8eryEn5o7tJ4j5A1UeAGArkMzeXwb5AOPQ%3D%3D
2025-05-14 16:57:49,881 - visualization-test - INFO -   - figures/trial_timeline.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/trial_timeline.png?Expires=1747342661&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=T0PFuoZZW5CpYJPQIquRNe7Neb3tuRIorYMCpy5ehhhl0dnGRCpZ9uzWXkkQHnp51i%2BXvrz0HQD%2BpqYwrVBlA6LFFxbPHoHXsKAG5PocmZMAvDN8B9wiUlIOUvC8i88TimlndvmT90rAeDFSv8yIgJegzYXtVNdvIPLWn2ZETBTX4xZbM3vuDGg1kUvl7bMg0DoBSZT1eUZeJL4OKlE1UmJ6gWgQ2WaVYEw%2FSR7FJNP7dwjLXB9T30zfEVhzrkRTzpM5ViHKI6K5As2Kgu%2FQVRfHfC4Zt6aeEhYxa8YjtFrPwhKKOTYSEpLpWZWU4L3wAeWOQ4oXiCEGdD6vKGXVOg%3D%3D
2025-05-14 16:57:49,881 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-14 16:57:50,210 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-14 16:57:50,417 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/trial_timeline.png?Expires=1747342670&GoogleAccessId=clinical-trials-sa%40clinicaltrials-v1.iam.gserviceaccount.com&Signature=ndfcK5Jig%2FcKqxM0D8DDKuhIWvM9iDBT0SwZ9ljiukYErDe1bUVNJHdIeXoPMBpdIazgQdkFhWOBNKx5WSZuLLhbuY6ui%2FiwP9tUmFseNB%2FF5WBXEXjW4smBXICiEV4G3AZ%2BBBp%2Fkf6zoSq4f7skt%2BuPkv5kIntsanzgOyspjCqI0ufrZbamEY8NFFrdJfmXNUajOActfsKp8v4iitnVI2GU1uTR%2BvYHCW1B6bJP36pPStA42I4FSx2WWpTnnSEE35f99XdgQFl%2F9BBXPInKZt2WyqApldFEvOMT9nyZ28HmeOWHkqHNvNPBjCVq2Ji99z0Qi3jeiABTmnA3yLb%2F7A%3D%3D
2025-05-14 16:57:50,417 - visualization-test - INFO - === Test Summary ===
2025-05-14 16:57:50,417 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-14 16:57:50,417 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-14 16:57:50,417 - visualization-test - INFO - cloud_storage: ✅ PASS
2025-05-15 17:12:31,057 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:12:31,057 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:12:31,057 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:12:31,085 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:12:31,302 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:12:31,302 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:12:31,303 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:12:31,303 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:12:31,303 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:12:31,303 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:12:31,586 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:12:31,586 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:12:31,912 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:12:31,912 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:12:32,152 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:12:32,153 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:12:32,377 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:12:32,377 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:12:32,614 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:12:32,614 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:12:32,614 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:12:32,614 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:12:32,614 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:12:32,614 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:12:32,614 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:12:32,614 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:12:32,614 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:12:32,614 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:12:32,614 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:12:32,614 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:12:32,614 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:12:32,614 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:12:32,839 - visualization-test - INFO - Uploading test files for run_id: debug_run
2025-05-15 17:12:32,839 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:12:32,839 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:12:41,830 - cloud_storage - ERROR - Error initializing cloud storage: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
Traceback (most recent call last):
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/cloud_storage.py", line 18, in initialize_storage
    storage_client = storage.Client()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/client.py", line 247, in __init__
    super(Client, self).__init__(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 338, in __init__
    _ClientProjectMixin.__init__(self, project=project, credentials=credentials)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 286, in __init__
    project = self._determine_default(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 305, in _determine_default
    return _determine_default_project(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/_helpers/__init__.py", line 152, in _determine_default_project
    _, project = google.auth.default()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/auth/_default.py", line 685, in default
    raise exceptions.DefaultCredentialsError(_CLOUD_SDK_MISSING_CREDENTIALS)
google.auth.exceptions.DefaultCredentialsError: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
2025-05-15 17:12:41,837 - cloud_storage - ERROR - Failed to initialize storage. Files will not be uploaded.
2025-05-15 17:12:41,837 - visualization-test - ERROR - ❌ No files were uploaded to Cloud Storage
2025-05-15 17:12:41,837 - visualization-test - INFO - === Test Summary ===
2025-05-15 17:12:41,837 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 17:12:41,837 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 17:12:41,837 - visualization-test - INFO - cloud_storage: ❌ FAIL
2025-05-15 17:15:55,878 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:15:55,879 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:15:55,879 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:15:55,890 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:15:56,110 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:15:56,110 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:15:56,111 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:15:56,111 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:15:56,111 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:15:56,111 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:15:56,392 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:15:56,392 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:15:56,717 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:15:56,717 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:15:56,953 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:15:56,953 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:15:57,177 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:15:57,177 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:15:57,408 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:15:57,408 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:15:57,408 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:15:57,408 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:15:57,408 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:15:57,408 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:15:57,408 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:15:57,409 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:15:57,409 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:15:57,409 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:15:57,409 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:15:57,409 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:15:57,409 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:15:57,409 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:15:57,630 - visualization-test - INFO - Uploading test files for run_id: debug_run
2025-05-15 17:15:57,630 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:15:57,630 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:16:06,593 - cloud_storage - ERROR - Error initializing cloud storage: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
Traceback (most recent call last):
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/cloud_storage.py", line 18, in initialize_storage
    storage_client = storage.Client()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/client.py", line 247, in __init__
    super(Client, self).__init__(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 338, in __init__
    _ClientProjectMixin.__init__(self, project=project, credentials=credentials)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 286, in __init__
    project = self._determine_default(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 305, in _determine_default
    return _determine_default_project(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/_helpers/__init__.py", line 152, in _determine_default_project
    _, project = google.auth.default()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/auth/_default.py", line 685, in default
    raise exceptions.DefaultCredentialsError(_CLOUD_SDK_MISSING_CREDENTIALS)
google.auth.exceptions.DefaultCredentialsError: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
2025-05-15 17:16:06,607 - cloud_storage - ERROR - Failed to initialize storage. Files will not be uploaded.
2025-05-15 17:16:06,607 - visualization-test - ERROR - ❌ No files were uploaded to Cloud Storage
2025-05-15 17:16:06,608 - visualization-test - INFO - === Test Summary ===
2025-05-15 17:16:06,608 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 17:16:06,608 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 17:16:06,608 - visualization-test - INFO - cloud_storage: ❌ FAIL
2025-05-15 17:19:34,223 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:19:34,224 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:19:34,224 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:19:34,232 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:19:34,407 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:19:34,408 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:19:34,408 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:19:34,408 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:19:34,409 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:19:34,409 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:19:34,693 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:19:34,693 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:19:35,017 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:19:35,018 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:19:35,254 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:19:35,254 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:19:35,478 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:19:35,478 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:19:35,709 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:19:35,709 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:19:35,709 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:19:35,709 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:19:35,709 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:19:35,709 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:19:35,709 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:19:35,709 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:19:35,710 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:19:35,710 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:19:35,710 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:19:35,710 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:19:35,710 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:19:35,710 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:19:35,951 - visualization-test - INFO - Testing direct authentication with: servicekey.json
2025-05-15 17:19:35,953 - visualization-test - INFO - Project ID from credentials: clinicaltrials-v1
2025-05-15 17:19:36,415 - visualization-test - INFO - Direct upload successful
2025-05-15 17:19:36,415 - visualization-test - INFO - Testing upload_pipeline_outputs for run_id: debug_run
2025-05-15 17:19:36,415 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:19:36,415 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:19:36,418 - cloud_storage - INFO - Successfully authenticated with servicekey.json in current directory
2025-05-15 17:19:36,694 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:19:36,695 - cloud_storage - INFO - Processing directory: data
2025-05-15 17:19:36,695 - cloud_storage - INFO - Found 2 files in data
2025-05-15 17:19:36,695 - cloud_storage - INFO - Uploading data/clinical_trials.csv to debug_run/data/clinical_trials.csv
2025-05-15 17:19:37,014 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Fclinical_trials.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:39,252 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Fclinical_trials.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:41,482 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Fclinical_trials.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:19:41,483 - cloud_storage - INFO - Uploading data/interventions.csv to debug_run/data/interventions.csv
2025-05-15 17:19:41,892 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Finterventions.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:44,169 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Finterventions.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:46,383 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Finterventions.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:19:46,383 - cloud_storage - INFO - Processing directory: results
2025-05-15 17:19:46,385 - cloud_storage - INFO - Found 3 files in results
2025-05-15 17:19:46,385 - cloud_storage - INFO - Uploading results/summary.json to debug_run/results/summary.json
2025-05-15 17:19:46,631 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Fsummary.json/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:48,886 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Fsummary.json/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:51,129 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Fsummary.json/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:19:51,129 - cloud_storage - INFO - Uploading results/report.md to debug_run/results/report.md
2025-05-15 17:19:51,403 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.md/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:53,626 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.md/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:55,839 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.md/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:19:55,840 - cloud_storage - INFO - Uploading results/report.txt to debug_run/results/report.txt
2025-05-15 17:19:56,103 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.txt/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:19:58,316 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.txt/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:00,582 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.txt/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:20:00,583 - cloud_storage - INFO - Processing directory: figures
2025-05-15 17:20:00,583 - cloud_storage - INFO - Found 6 files in figures
2025-05-15 17:20:00,583 - cloud_storage - INFO - Uploading figures/duration_vs_enrollment.png to debug_run/figures/duration_vs_enrollment.png
2025-05-15 17:20:00,967 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Ffigures%2Fduration_vs_enrollment.png/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:03,268 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Ffigures%2Fduration_vs_enrollment.png/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:21,122 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:20:21,122 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:20:21,123 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:20:21,127 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:20:21,279 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:20:21,279 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:20:21,280 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:20:21,280 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:20:21,280 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:20:21,280 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:20:21,548 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:20:21,548 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:20:21,875 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:20:21,875 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:20:22,108 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:20:22,108 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:20:22,332 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:20:22,332 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:20:22,567 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:20:22,567 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:20:22,567 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:20:22,567 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:20:22,567 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:20:22,567 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:20:22,568 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:20:22,568 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:20:22,568 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:20:22,568 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:20:22,568 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:20:22,568 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:20:22,568 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:20:22,568 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:20:22,791 - visualization-test - INFO - Testing direct authentication with: servicekey.json
2025-05-15 17:20:22,792 - visualization-test - INFO - Project ID from credentials: clinicaltrials-v1
2025-05-15 17:20:23,216 - visualization-test - INFO - Direct upload successful
2025-05-15 17:20:23,217 - visualization-test - INFO - Testing upload_pipeline_outputs for run_id: debug_run
2025-05-15 17:20:23,217 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:20:23,217 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:20:23,221 - cloud_storage - INFO - Successfully authenticated with servicekey.json in current directory
2025-05-15 17:20:23,482 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:20:23,482 - cloud_storage - INFO - Processing directory: data
2025-05-15 17:20:23,483 - cloud_storage - INFO - Found 2 files in data
2025-05-15 17:20:23,483 - cloud_storage - INFO - Uploading data/clinical_trials.csv to debug_run/data/clinical_trials.csv
2025-05-15 17:20:23,735 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Fclinical_trials.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:25,955 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Fclinical_trials.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:28,179 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Fclinical_trials.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:20:28,180 - cloud_storage - INFO - Uploading data/interventions.csv to debug_run/data/interventions.csv
2025-05-15 17:20:28,430 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Finterventions.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:30,682 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Finterventions.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:32,886 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fdata%2Finterventions.csv/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:20:32,886 - cloud_storage - INFO - Processing directory: results
2025-05-15 17:20:32,886 - cloud_storage - INFO - Found 3 files in results
2025-05-15 17:20:32,887 - cloud_storage - INFO - Uploading results/summary.json to debug_run/results/summary.json
2025-05-15 17:20:33,168 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Fsummary.json/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:35,471 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Fsummary.json/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:37,718 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Fsummary.json/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:20:37,719 - cloud_storage - INFO - Uploading results/report.md to debug_run/results/report.md
2025-05-15 17:20:37,933 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.md/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:40,180 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.md/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:42,389 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.md/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:20:42,390 - cloud_storage - INFO - Uploading results/report.txt to debug_run/results/report.txt
2025-05-15 17:20:42,588 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.txt/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:44,795 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.txt/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:47,002 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Fresults%2Freport.txt/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:20:47,003 - cloud_storage - INFO - Processing directory: figures
2025-05-15 17:20:47,003 - cloud_storage - INFO - Found 6 files in figures
2025-05-15 17:20:47,004 - cloud_storage - INFO - Uploading figures/duration_vs_enrollment.png to debug_run/figures/duration_vs_enrollment.png
2025-05-15 17:20:47,294 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Ffigures%2Fduration_vs_enrollment.png/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:49,592 - cloud_storage - WARNING - Attempt 2 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Ffigures%2Fduration_vs_enrollment.png/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:20:51,875 - cloud_storage - ERROR - Upload failed after 3 attempts: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Ffigures%2Fduration_vs_enrollment.png/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access
2025-05-15 17:20:51,875 - cloud_storage - INFO - Uploading figures/test_cloud_storage.png to debug_run/figures/test_cloud_storage.png
2025-05-15 17:20:52,070 - cloud_storage - WARNING - Attempt 1 failed: 400 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1/o/debug_run%2Ffigures%2Ftest_cloud_storage.png/acl?prettyPrint=false: Cannot get legacy ACL for an object when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access. Retrying...
2025-05-15 17:28:55,666 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:28:55,666 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:28:55,666 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:28:55,684 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:28:55,910 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:28:55,910 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:28:55,910 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:28:55,911 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:28:55,911 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:28:55,911 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:28:56,200 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:28:56,200 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:28:56,521 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:28:56,521 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:28:56,761 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:28:56,761 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:28:56,988 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:28:56,988 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:28:57,217 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:28:57,217 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:28:57,217 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:28:57,217 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:28:57,217 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:28:57,217 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:28:57,217 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:28:57,217 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:28:57,217 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:28:57,217 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:28:57,217 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:28:57,217 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:28:57,217 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:28:57,217 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:28:57,503 - visualization-test - INFO - Testing upload_pipeline_outputs for run_id: debug_run
2025-05-15 17:28:57,504 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:28:57,504 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:29:06,463 - cloud_storage - ERROR - Authentication error: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
Traceback (most recent call last):
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/cloud_storage.py", line 54, in initialize_storage
    storage_client = storage.Client()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/client.py", line 247, in __init__
    super(Client, self).__init__(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 338, in __init__
    _ClientProjectMixin.__init__(self, project=project, credentials=credentials)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 286, in __init__
    project = self._determine_default(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 305, in _determine_default
    return _determine_default_project(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/_helpers/__init__.py", line 152, in _determine_default_project
    _, project = google.auth.default()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/auth/_default.py", line 685, in default
    raise exceptions.DefaultCredentialsError(_CLOUD_SDK_MISSING_CREDENTIALS)
google.auth.exceptions.DefaultCredentialsError: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
2025-05-15 17:29:09,358 - cloud_storage - ERROR - Error initializing cloud storage: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
Traceback (most recent call last):
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/cloud_storage.py", line 54, in initialize_storage
    storage_client = storage.Client()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/client.py", line 247, in __init__
    super(Client, self).__init__(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 338, in __init__
    _ClientProjectMixin.__init__(self, project=project, credentials=credentials)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 286, in __init__
    project = self._determine_default(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 305, in _determine_default
    return _determine_default_project(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/_helpers/__init__.py", line 152, in _determine_default_project
    _, project = google.auth.default()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/auth/_default.py", line 685, in default
    raise exceptions.DefaultCredentialsError(_CLOUD_SDK_MISSING_CREDENTIALS)
google.auth.exceptions.DefaultCredentialsError: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/cloud_storage.py", line 59, in initialize_storage
    storage_client = storage.Client()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/client.py", line 247, in __init__
    super(Client, self).__init__(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 338, in __init__
    _ClientProjectMixin.__init__(self, project=project, credentials=credentials)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 286, in __init__
    project = self._determine_default(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 305, in _determine_default
    return _determine_default_project(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/_helpers/__init__.py", line 152, in _determine_default_project
    _, project = google.auth.default()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/auth/_default.py", line 685, in default
    raise exceptions.DefaultCredentialsError(_CLOUD_SDK_MISSING_CREDENTIALS)
google.auth.exceptions.DefaultCredentialsError: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
2025-05-15 17:29:09,360 - cloud_storage - ERROR - Failed to initialize storage. Files will not be uploaded.
2025-05-15 17:29:09,360 - visualization-test - ERROR - ❌ No files were uploaded to Cloud Storage
2025-05-15 17:29:09,360 - visualization-test - INFO - This could be due to authentication issues - check your GOOGLE_APPLICATION_CREDENTIALS
2025-05-15 17:29:09,360 - visualization-test - INFO - === Test Summary ===
2025-05-15 17:29:09,361 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 17:29:09,361 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 17:29:09,361 - visualization-test - INFO - cloud_storage: ❌ FAIL
2025-05-15 17:42:53,926 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:42:53,926 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:42:53,927 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:42:53,939 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:42:54,129 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:42:54,129 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:42:54,130 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:42:54,130 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:42:54,130 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:42:54,130 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:42:54,409 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:42:54,409 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:42:54,737 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:42:54,737 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:42:54,978 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:42:54,978 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:42:55,206 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:42:55,206 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:42:55,435 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:42:55,435 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:42:55,435 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:42:55,435 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:42:55,435 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:42:55,435 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:42:55,435 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:42:55,435 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:42:55,435 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:42:55,435 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:42:55,435 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:42:55,435 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:42:55,435 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:42:55,435 - visualization-test - INFO - Skipping cloud storage test (set SKIP_CLOUD_TEST=false to enable)
2025-05-15 17:42:55,435 - visualization-test - INFO - === Test Summary ===
2025-05-15 17:42:55,435 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 17:42:55,435 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 17:42:55,435 - visualization-test - INFO - cloud_storage: ⏭️ SKIPPED
2025-05-15 17:42:55,435 - visualization-test - INFO - Essential tests passed! Continue with local development.
2025-05-15 17:43:18,484 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:43:18,484 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:43:18,484 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:43:18,489 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:43:18,637 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:43:18,637 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:43:18,638 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:43:18,638 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:43:18,638 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:43:18,638 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:43:18,918 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:43:18,918 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:43:19,245 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:43:19,245 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:43:19,476 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:43:19,477 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:43:19,700 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:43:19,700 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:43:19,931 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:43:19,931 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:43:19,931 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:43:19,931 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:43:19,931 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:43:19,931 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:43:19,931 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:43:19,931 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:43:19,931 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:43:19,932 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:43:19,932 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:43:19,932 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:43:19,932 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:43:19,932 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:43:20,178 - visualization-test - INFO - Testing direct authentication with: servicekey.json
2025-05-15 17:43:20,179 - visualization-test - INFO - Project ID from credentials: clinicaltrials-v1
2025-05-15 17:43:20,724 - visualization-test - ERROR - Direct bucket test failed: 403 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1?fields=name&prettyPrint=false: clinical-service-account@clinicaltrials-v1.iam.gserviceaccount.com does not have storage.buckets.get access to the Google Cloud Storage bucket. Permission 'storage.buckets.get' denied on resource (or it may not exist).
2025-05-15 17:43:20,725 - visualization-test - INFO - Testing upload_pipeline_outputs for run_id: debug_run
2025-05-15 17:43:20,725 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:43:20,725 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:43:20,725 - cloud_storage - INFO - Looking for credentials at: None
2025-05-15 17:43:20,726 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/servicekey.json
2025-05-15 17:43:20,729 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:43:20,729 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:43:20,729 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:43:21,231 - cloud_storage - ERROR - Error initializing cloud storage: 403 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1?fields=name&prettyPrint=false: clinical-service-account@clinicaltrials-v1.iam.gserviceaccount.com does not have storage.buckets.get access to the Google Cloud Storage bucket. Permission 'storage.buckets.get' denied on resource (or it may not exist).
Traceback (most recent call last):
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/cloud_storage.py", line 68, in initialize_storage
    if not bucket.exists():
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/bucket.py", line 985, in exists
    client._get_resource(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/client.py", line 493, in _get_resource
    return self._connection.api_request(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/_http.py", line 90, in api_request
    return call()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/api_core/retry/retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/_http/__init__.py", line 494, in api_request
    raise exceptions.from_http_response(response)
google.api_core.exceptions.Forbidden: 403 GET https://storage.googleapis.com/storage/v1/b/clinicaltrialsv1?fields=name&prettyPrint=false: clinical-service-account@clinicaltrials-v1.iam.gserviceaccount.com does not have storage.buckets.get access to the Google Cloud Storage bucket. Permission 'storage.buckets.get' denied on resource (or it may not exist).
2025-05-15 17:43:21,239 - cloud_storage - ERROR - Failed to initialize storage. Files will not be uploaded.
2025-05-15 17:43:21,239 - visualization-test - ERROR - ❌ No files were uploaded to Cloud Storage
2025-05-15 17:43:21,239 - visualization-test - INFO - This could be due to authentication issues - check your GOOGLE_APPLICATION_CREDENTIALS
2025-05-15 17:43:21,239 - visualization-test - INFO - === Test Summary ===
2025-05-15 17:43:21,239 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 17:43:21,239 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 17:43:21,239 - visualization-test - INFO - cloud_storage: ❌ FAIL
2025-05-15 17:43:21,239 - visualization-test - INFO - Essential tests passed! Continue with local development.
2025-05-15 17:47:25,344 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:47:25,344 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:47:25,344 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:47:25,359 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:47:25,531 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:47:25,531 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:47:25,532 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:47:25,532 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:47:25,532 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:47:25,532 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:47:25,809 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:47:25,809 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:47:26,136 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:47:26,136 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:47:26,381 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:47:26,381 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:47:26,608 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:47:26,608 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:47:26,835 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:47:26,835 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:47:26,835 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:47:26,835 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:47:26,835 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:47:26,835 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:47:26,835 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:47:26,835 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:47:26,835 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:47:26,835 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:47:26,835 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:47:26,836 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:47:26,836 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:47:26,836 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:47:27,088 - visualization-test - INFO - Testing upload_pipeline_outputs for run_id: debug_run
2025-05-15 17:47:27,088 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:47:27,088 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:47:27,088 - cloud_storage - INFO - Looking for credentials at: None
2025-05-15 17:47:27,088 - cloud_storage - WARNING - Falling back to default credentials (likely to fail in local development)
2025-05-15 17:47:36,043 - cloud_storage - ERROR - Error initializing cloud storage: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
Traceback (most recent call last):
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/cloud_storage.py", line 62, in initialize_storage
    storage_client = storage.Client()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/storage/client.py", line 247, in __init__
    super(Client, self).__init__(
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 338, in __init__
    _ClientProjectMixin.__init__(self, project=project, credentials=credentials)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 286, in __init__
    project = self._determine_default(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/client/__init__.py", line 305, in _determine_default
    return _determine_default_project(project)
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/cloud/_helpers/__init__.py", line 152, in _determine_default_project
    _, project = google.auth.default()
  File "/Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/trials_venv/lib/python3.10/site-packages/google/auth/_default.py", line 685, in default
    raise exceptions.DefaultCredentialsError(_CLOUD_SDK_MISSING_CREDENTIALS)
google.auth.exceptions.DefaultCredentialsError: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.
2025-05-15 17:47:36,050 - cloud_storage - ERROR - Failed to initialize storage. Files will not be uploaded.
2025-05-15 17:47:36,050 - visualization-test - ERROR - ❌ No files were uploaded to Cloud Storage
2025-05-15 17:47:36,050 - visualization-test - INFO - This could be due to authentication issues - check your GOOGLE_APPLICATION_CREDENTIALS
2025-05-15 17:47:36,050 - visualization-test - INFO - === Test Summary ===
2025-05-15 17:47:36,050 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 17:47:36,050 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 17:47:36,050 - visualization-test - INFO - cloud_storage: ❌ FAIL
2025-05-15 17:47:36,051 - visualization-test - INFO - Essential tests passed! Continue with local development.
2025-05-15 17:47:49,222 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:47:49,223 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:47:49,223 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:47:49,228 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:47:49,380 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:47:49,381 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:47:49,381 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:47:49,381 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:47:49,382 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:47:49,382 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:47:49,656 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:47:49,656 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:47:49,982 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:47:49,982 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:47:50,214 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:47:50,214 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:47:50,439 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:47:50,439 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:47:50,672 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:47:50,672 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:47:50,672 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:47:50,672 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:47:50,672 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:47:50,672 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:47:50,672 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:47:50,672 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:47:50,672 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:47:50,672 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:47:50,672 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:47:50,672 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:47:50,673 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:47:50,673 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:47:50,900 - visualization-test - INFO - Testing direct authentication with: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:47:50,901 - visualization-test - INFO - Project ID from credentials: clinicaltrials-v1
2025-05-15 17:47:51,461 - visualization-test - INFO - Direct upload successful
2025-05-15 17:47:51,461 - visualization-test - INFO - Testing upload_pipeline_outputs for run_id: debug_run
2025-05-15 17:47:51,461 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:47:51,462 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:47:51,462 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:47:51,462 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:47:51,465 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:47:51,465 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:47:51,466 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:47:51,752 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:47:51,851 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:47:51,851 - cloud_storage - INFO - Processing directory: data
2025-05-15 17:47:51,852 - cloud_storage - INFO - Found 2 files in data
2025-05-15 17:47:51,853 - cloud_storage - INFO - Uploading data/clinical_trials.csv to debug_run/data/clinical_trials.csv
2025-05-15 17:47:52,598 - cloud_storage - INFO - Successfully uploaded and shared data/clinical_trials.csv
2025-05-15 17:47:52,600 - cloud_storage - INFO - Uploading data/interventions.csv to debug_run/data/interventions.csv
2025-05-15 17:47:53,314 - cloud_storage - INFO - Successfully uploaded and shared data/interventions.csv
2025-05-15 17:47:53,314 - cloud_storage - INFO - Processing directory: results
2025-05-15 17:47:53,315 - cloud_storage - INFO - Found 3 files in results
2025-05-15 17:47:53,315 - cloud_storage - INFO - Uploading results/summary.json to debug_run/results/summary.json
2025-05-15 17:47:54,031 - cloud_storage - INFO - Successfully uploaded and shared results/summary.json
2025-05-15 17:47:54,034 - cloud_storage - INFO - Uploading results/report.md to debug_run/results/report.md
2025-05-15 17:47:54,658 - cloud_storage - INFO - Successfully uploaded and shared results/report.md
2025-05-15 17:47:54,658 - cloud_storage - INFO - Uploading results/report.txt to debug_run/results/report.txt
2025-05-15 17:47:55,269 - cloud_storage - INFO - Successfully uploaded and shared results/report.txt
2025-05-15 17:47:55,270 - cloud_storage - INFO - Processing directory: figures
2025-05-15 17:47:55,270 - cloud_storage - INFO - Found 6 files in figures
2025-05-15 17:47:55,272 - cloud_storage - INFO - Uploading figures/duration_vs_enrollment.png to debug_run/figures/duration_vs_enrollment.png
2025-05-15 17:47:55,975 - cloud_storage - INFO - Successfully uploaded and shared figures/duration_vs_enrollment.png
2025-05-15 17:47:55,976 - cloud_storage - INFO - Uploading figures/test_cloud_storage.png to debug_run/figures/test_cloud_storage.png
2025-05-15 17:47:56,590 - cloud_storage - INFO - Successfully uploaded and shared figures/test_cloud_storage.png
2025-05-15 17:47:56,591 - cloud_storage - INFO - Uploading figures/modality_distribution.png to debug_run/figures/modality_distribution.png
2025-05-15 17:47:57,408 - cloud_storage - INFO - Successfully uploaded and shared figures/modality_distribution.png
2025-05-15 17:47:57,409 - cloud_storage - INFO - Uploading figures/top_sponsors.png to debug_run/figures/top_sponsors.png
2025-05-15 17:47:58,126 - cloud_storage - INFO - Successfully uploaded and shared figures/top_sponsors.png
2025-05-15 17:47:58,126 - cloud_storage - INFO - Uploading figures/enrollment_distribution.png to debug_run/figures/enrollment_distribution.png
2025-05-15 17:47:58,842 - cloud_storage - INFO - Successfully uploaded and shared figures/enrollment_distribution.png
2025-05-15 17:47:58,843 - cloud_storage - INFO - Uploading figures/trial_timeline.png to debug_run/figures/trial_timeline.png
2025-05-15 17:48:00,583 - cloud_storage - INFO - Successfully uploaded and shared figures/trial_timeline.png
2025-05-15 17:48:00,583 - cloud_storage - INFO - Completed uploading 11 files for run ID: debug_run
2025-05-15 17:48:00,583 - visualization-test - INFO - ✅ Uploaded 11 files to Cloud Storage:
2025-05-15 17:48:00,583 - visualization-test - INFO -   - data/clinical_trials.csv: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/clinical_trials.csv
2025-05-15 17:48:00,583 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:00,584 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:00,584 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:00,587 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:00,587 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:00,587 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:00,853 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:00,930 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:01,000 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/clinical_trials.csv
2025-05-15 17:48:01,000 - visualization-test - INFO -   - data/interventions.csv: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/interventions.csv
2025-05-15 17:48:01,001 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:01,001 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:01,001 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:01,004 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:01,005 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:01,005 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:01,257 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:01,392 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:01,465 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/interventions.csv
2025-05-15 17:48:01,465 - visualization-test - INFO -   - results/summary.json: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/summary.json
2025-05-15 17:48:01,465 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:01,465 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:01,466 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:01,469 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:01,469 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:01,469 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:01,710 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:01,844 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:01,912 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/summary.json
2025-05-15 17:48:01,913 - visualization-test - INFO -   - results/report.md: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.md
2025-05-15 17:48:01,913 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:01,913 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:01,913 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:01,916 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:01,916 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:01,916 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:02,148 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:02,299 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:02,365 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.md
2025-05-15 17:48:02,366 - visualization-test - INFO -   - results/report.txt: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.txt
2025-05-15 17:48:02,366 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:02,366 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:02,366 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:02,369 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:02,370 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:02,370 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:03,677 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:03,782 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:03,886 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.txt
2025-05-15 17:48:03,886 - visualization-test - INFO -   - figures/duration_vs_enrollment.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/duration_vs_enrollment.png
2025-05-15 17:48:03,887 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:03,887 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:03,887 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:03,890 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:03,890 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:03,890 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:04,296 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:04,369 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:04,498 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/duration_vs_enrollment.png
2025-05-15 17:48:04,499 - visualization-test - INFO -   - figures/test_cloud_storage.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/test_cloud_storage.png
2025-05-15 17:48:04,499 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:04,499 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:04,499 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:04,502 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:04,502 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:04,503 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:04,773 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:04,941 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:05,011 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/test_cloud_storage.png
2025-05-15 17:48:05,011 - visualization-test - INFO -   - figures/modality_distribution.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/modality_distribution.png
2025-05-15 17:48:05,011 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:05,011 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:05,012 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:05,015 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:05,015 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:05,016 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:05,277 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:05,350 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:05,424 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/modality_distribution.png
2025-05-15 17:48:05,425 - visualization-test - INFO -   - figures/top_sponsors.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/top_sponsors.png
2025-05-15 17:48:05,425 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:05,425 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:05,425 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:05,428 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:05,428 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:05,429 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:05,676 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:05,810 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:05,949 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/top_sponsors.png
2025-05-15 17:48:05,950 - visualization-test - INFO -   - figures/enrollment_distribution.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/enrollment_distribution.png
2025-05-15 17:48:05,950 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:05,950 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:05,950 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:05,954 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:05,954 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:05,954 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:06,334 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:06,408 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:06,538 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/enrollment_distribution.png
2025-05-15 17:48:06,539 - visualization-test - INFO -   - figures/trial_timeline.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/trial_timeline.png
2025-05-15 17:48:06,539 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:48:06,539 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:06,539 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:48:06,543 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:48:06,543 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:48:06,543 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:48:06,793 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:48:06,869 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:48:06,940 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/trial_timeline.png
2025-05-15 17:48:06,941 - visualization-test - INFO - === Test Summary ===
2025-05-15 17:48:06,941 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 17:48:06,941 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 17:48:06,941 - visualization-test - INFO - cloud_storage: ✅ PASS
2025-05-15 17:48:06,941 - visualization-test - INFO - Essential tests passed! Continue with local development.
2025-05-15 17:51:29,213 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 17:51:29,214 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 17:51:29,214 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 17:51:29,222 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 17:51:29,396 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 17:51:29,396 - visualization-test - INFO - Testing visualization module...
2025-05-15 17:51:29,397 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 17:51:29,397 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 17:51:29,397 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 17:51:29,397 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 17:51:29,680 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 17:51:29,680 - visualization - INFO - Creating trial timeline visualization
2025-05-15 17:51:30,003 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 17:51:30,003 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 17:51:30,242 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 17:51:30,243 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 17:51:30,466 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 17:51:30,466 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 17:51:30,699 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 17:51:30,700 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 17:51:30,700 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 17:51:30,700 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 17:51:30,700 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 17:51:30,700 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 17:51:30,700 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 17:51:30,700 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 17:51:30,700 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 17:51:30,700 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 17:51:30,700 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 17:51:30,700 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 17:51:30,700 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 17:51:30,700 - visualization-test - INFO - Testing cloud storage...
2025-05-15 17:51:30,943 - visualization-test - INFO - Testing direct authentication with: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:30,945 - visualization-test - INFO - Project ID from credentials: clinicaltrials-v1
2025-05-15 17:51:31,400 - visualization-test - INFO - Direct upload successful
2025-05-15 17:51:31,400 - visualization-test - INFO - Testing upload_pipeline_outputs for run_id: debug_run
2025-05-15 17:51:31,400 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 17:51:31,401 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:31,401 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:31,401 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:31,404 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:31,405 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:31,405 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:31,647 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:31,747 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:31,748 - cloud_storage - INFO - Processing directory: data
2025-05-15 17:51:31,749 - cloud_storage - INFO - Found 2 files in data
2025-05-15 17:51:31,749 - cloud_storage - INFO - Uploading data/clinical_trials.csv to debug_run/data/clinical_trials.csv
2025-05-15 17:51:32,450 - cloud_storage - INFO - Successfully uploaded and shared data/clinical_trials.csv
2025-05-15 17:51:32,450 - cloud_storage - INFO - Uploading data/interventions.csv to debug_run/data/interventions.csv
2025-05-15 17:51:33,067 - cloud_storage - INFO - Successfully uploaded and shared data/interventions.csv
2025-05-15 17:51:33,068 - cloud_storage - INFO - Processing directory: results
2025-05-15 17:51:33,068 - cloud_storage - INFO - Found 3 files in results
2025-05-15 17:51:33,068 - cloud_storage - INFO - Uploading results/summary.json to debug_run/results/summary.json
2025-05-15 17:51:33,780 - cloud_storage - INFO - Successfully uploaded and shared results/summary.json
2025-05-15 17:51:33,780 - cloud_storage - INFO - Uploading results/report.md to debug_run/results/report.md
2025-05-15 17:51:34,381 - cloud_storage - INFO - Successfully uploaded and shared results/report.md
2025-05-15 17:51:34,382 - cloud_storage - INFO - Uploading results/report.txt to debug_run/results/report.txt
2025-05-15 17:51:35,009 - cloud_storage - INFO - Successfully uploaded and shared results/report.txt
2025-05-15 17:51:35,009 - cloud_storage - INFO - Processing directory: figures
2025-05-15 17:51:35,009 - cloud_storage - INFO - Found 6 files in figures
2025-05-15 17:51:35,010 - cloud_storage - INFO - Uploading figures/duration_vs_enrollment.png to debug_run/figures/duration_vs_enrollment.png
2025-05-15 17:51:35,728 - cloud_storage - INFO - Successfully uploaded and shared figures/duration_vs_enrollment.png
2025-05-15 17:51:35,728 - cloud_storage - INFO - Uploading figures/test_cloud_storage.png to debug_run/figures/test_cloud_storage.png
2025-05-15 17:51:36,341 - cloud_storage - INFO - Successfully uploaded and shared figures/test_cloud_storage.png
2025-05-15 17:51:36,341 - cloud_storage - INFO - Uploading figures/modality_distribution.png to debug_run/figures/modality_distribution.png
2025-05-15 17:51:37,160 - cloud_storage - INFO - Successfully uploaded and shared figures/modality_distribution.png
2025-05-15 17:51:37,160 - cloud_storage - INFO - Uploading figures/top_sponsors.png to debug_run/figures/top_sponsors.png
2025-05-15 17:51:37,878 - cloud_storage - INFO - Successfully uploaded and shared figures/top_sponsors.png
2025-05-15 17:51:37,878 - cloud_storage - INFO - Uploading figures/enrollment_distribution.png to debug_run/figures/enrollment_distribution.png
2025-05-15 17:51:38,698 - cloud_storage - INFO - Successfully uploaded and shared figures/enrollment_distribution.png
2025-05-15 17:51:38,699 - cloud_storage - INFO - Uploading figures/trial_timeline.png to debug_run/figures/trial_timeline.png
2025-05-15 17:51:39,413 - cloud_storage - INFO - Successfully uploaded and shared figures/trial_timeline.png
2025-05-15 17:51:39,413 - cloud_storage - INFO - Completed uploading 11 files for run ID: debug_run
2025-05-15 17:51:39,413 - visualization-test - INFO - ✅ Uploaded 11 files to Cloud Storage:
2025-05-15 17:51:39,413 - visualization-test - INFO -   - data/clinical_trials.csv: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/clinical_trials.csv
2025-05-15 17:51:39,413 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:39,413 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:39,414 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:39,416 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:39,416 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:39,416 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:39,672 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:39,803 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:39,887 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/clinical_trials.csv
2025-05-15 17:51:39,887 - visualization-test - INFO -   - data/interventions.csv: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/interventions.csv
2025-05-15 17:51:39,887 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:39,888 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:39,888 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:39,892 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:39,892 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:39,893 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:40,144 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:40,241 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:40,315 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/interventions.csv
2025-05-15 17:51:40,318 - visualization-test - INFO -   - results/summary.json: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/summary.json
2025-05-15 17:51:40,319 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:40,319 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:40,319 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:40,323 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:40,324 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:40,324 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:40,569 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:40,706 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:40,773 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/summary.json
2025-05-15 17:51:40,774 - visualization-test - INFO -   - results/report.md: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.md
2025-05-15 17:51:40,774 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:40,774 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:40,774 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:40,778 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:40,779 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:40,779 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:41,257 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:41,332 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:41,407 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.md
2025-05-15 17:51:41,407 - visualization-test - INFO -   - results/report.txt: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.txt
2025-05-15 17:51:41,407 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:41,407 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:41,408 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:41,411 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:41,412 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:41,412 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:41,653 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:41,754 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:41,835 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.txt
2025-05-15 17:51:41,835 - visualization-test - INFO -   - figures/duration_vs_enrollment.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/duration_vs_enrollment.png
2025-05-15 17:51:41,835 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:41,835 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:41,836 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:41,839 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:41,839 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:41,840 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:42,090 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:42,165 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:42,228 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/duration_vs_enrollment.png
2025-05-15 17:51:42,228 - visualization-test - INFO -   - figures/test_cloud_storage.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/test_cloud_storage.png
2025-05-15 17:51:42,228 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:42,228 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:42,229 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:42,231 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:42,231 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:42,231 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:42,494 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:42,616 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:42,705 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/test_cloud_storage.png
2025-05-15 17:51:42,705 - visualization-test - INFO -   - figures/modality_distribution.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/modality_distribution.png
2025-05-15 17:51:42,705 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:42,706 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:42,706 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:42,709 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:42,710 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:42,710 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:42,953 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:43,085 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:43,155 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/modality_distribution.png
2025-05-15 17:51:43,155 - visualization-test - INFO -   - figures/top_sponsors.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/top_sponsors.png
2025-05-15 17:51:43,155 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:43,156 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:43,156 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:43,158 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:43,158 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:43,158 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:43,407 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:43,552 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:43,625 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/top_sponsors.png
2025-05-15 17:51:43,625 - visualization-test - INFO -   - figures/enrollment_distribution.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/enrollment_distribution.png
2025-05-15 17:51:43,625 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:43,625 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:43,625 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:43,629 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:43,629 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:43,629 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:43,920 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:44,016 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:44,123 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/enrollment_distribution.png
2025-05-15 17:51:44,123 - visualization-test - INFO -   - figures/trial_timeline.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/trial_timeline.png
2025-05-15 17:51:44,123 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 17:51:44,124 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:44,124 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 17:51:44,127 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 17:51:44,128 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 17:51:44,128 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 17:51:44,374 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 17:51:44,509 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 17:51:44,580 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/trial_timeline.png
2025-05-15 17:51:44,580 - visualization-test - INFO - === Test Summary ===
2025-05-15 17:51:44,580 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 17:51:44,581 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 17:51:44,581 - visualization-test - INFO - cloud_storage: ✅ PASS
2025-05-15 17:51:44,581 - visualization-test - INFO - Essential tests passed! Continue with local development.
2025-05-15 18:05:44,018 - visualization-test - INFO - === Starting Visualization Debug Tests ===
2025-05-15 18:05:44,018 - visualization-test - INFO - Testing matplotlib backend...
2025-05-15 18:05:44,019 - visualization-test - INFO - Available matplotlib backends: ['gtk3agg', 'gtk3cairo', 'gtk4agg', 'gtk4cairo', 'macosx', 'nbagg', 'notebook', 'qtagg', 'qtcairo', 'qt5agg', 'qt5cairo', 'tkagg', 'tkcairo', 'webagg', 'wx', 'wxagg', 'wxcairo', 'agg', 'cairo', 'pdf', 'pgf', 'ps', 'svg', 'template']
2025-05-15 18:05:44,036 - visualization-test - INFO - Current matplotlib backend: macosx
2025-05-15 18:05:44,245 - visualization-test - INFO - ✅ Successfully created test plot (25647 bytes): test_plot.png
2025-05-15 18:05:44,245 - visualization-test - INFO - Testing visualization module...
2025-05-15 18:05:44,245 - visualization-test - INFO - Calling create_visualizations with test data to test_figures
2025-05-15 18:05:44,246 - visualization - INFO - Starting visualization generation in test_figures
2025-05-15 18:05:44,246 - visualization - INFO - Using matplotlib backend: Agg
2025-05-15 18:05:44,246 - visualization - INFO - Creating modality distribution pie chart
2025-05-15 18:05:44,524 - visualization - INFO - Saved test_figures/modality_distribution.png (size: 236498 bytes)
2025-05-15 18:05:44,524 - visualization - INFO - Creating trial timeline visualization
2025-05-15 18:05:44,854 - visualization - INFO - Saved test_figures/trial_timeline.png (size: 85309 bytes)
2025-05-15 18:05:44,855 - visualization - INFO - Creating enrollment distribution visualization
2025-05-15 18:05:45,092 - visualization - INFO - Saved test_figures/enrollment_distribution.png (size: 90141 bytes)
2025-05-15 18:05:45,092 - visualization - INFO - Creating duration vs enrollment scatter plot
2025-05-15 18:05:45,315 - visualization - INFO - Saved test_figures/duration_vs_enrollment.png (size: 105202 bytes)
2025-05-15 18:05:45,315 - visualization - INFO - Creating top sponsors bar chart
2025-05-15 18:05:45,550 - visualization - INFO - Saved test_figures/top_sponsors.png (size: 88224 bytes)
2025-05-15 18:05:45,550 - visualization - INFO - Verified file test_figures/modality_distribution.png exists (size: 236498 bytes)
2025-05-15 18:05:45,550 - visualization - INFO - Verified file test_figures/trial_timeline.png exists (size: 85309 bytes)
2025-05-15 18:05:45,550 - visualization - INFO - Verified file test_figures/enrollment_distribution.png exists (size: 90141 bytes)
2025-05-15 18:05:45,550 - visualization - INFO - Verified file test_figures/duration_vs_enrollment.png exists (size: 105202 bytes)
2025-05-15 18:05:45,550 - visualization - INFO - Verified file test_figures/top_sponsors.png exists (size: 88224 bytes)
2025-05-15 18:05:45,550 - visualization - INFO - Created 5 visualizations in test_figures
2025-05-15 18:05:45,550 - visualization-test - INFO - ✅ Successfully created 5 visualization files
2025-05-15 18:05:45,550 - visualization-test - INFO -   - test_figures/modality_distribution.png (236498 bytes)
2025-05-15 18:05:45,550 - visualization-test - INFO -   - test_figures/trial_timeline.png (85309 bytes)
2025-05-15 18:05:45,550 - visualization-test - INFO -   - test_figures/enrollment_distribution.png (90141 bytes)
2025-05-15 18:05:45,550 - visualization-test - INFO -   - test_figures/duration_vs_enrollment.png (105202 bytes)
2025-05-15 18:05:45,550 - visualization-test - INFO -   - test_figures/top_sponsors.png (88224 bytes)
2025-05-15 18:05:45,550 - visualization-test - INFO - Testing cloud storage...
2025-05-15 18:05:45,780 - visualization-test - INFO - Testing direct authentication with: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:45,782 - visualization-test - INFO - Project ID from credentials: clinicaltrials-v1
2025-05-15 18:05:46,476 - visualization-test - INFO - Direct upload successful
2025-05-15 18:05:46,477 - visualization-test - INFO - Testing upload_pipeline_outputs for run_id: debug_run
2025-05-15 18:05:46,477 - cloud_storage - INFO - Starting upload of pipeline outputs for run ID: debug_run
2025-05-15 18:05:46,477 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:46,477 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:46,477 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:46,480 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:46,480 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:46,481 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:46,753 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:46,829 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:05:46,830 - cloud_storage - INFO - Processing directory: data
2025-05-15 18:05:46,830 - cloud_storage - INFO - Found 2 files in data
2025-05-15 18:05:46,831 - cloud_storage - INFO - Uploading data/clinical_trials.csv to debug_run/data/clinical_trials.csv
2025-05-15 18:05:47,499 - cloud_storage - INFO - Successfully uploaded and shared data/clinical_trials.csv
2025-05-15 18:05:47,501 - cloud_storage - INFO - Uploading data/interventions.csv to debug_run/data/interventions.csv
2025-05-15 18:05:48,216 - cloud_storage - INFO - Successfully uploaded and shared data/interventions.csv
2025-05-15 18:05:48,217 - cloud_storage - INFO - Processing directory: results
2025-05-15 18:05:48,217 - cloud_storage - INFO - Found 3 files in results
2025-05-15 18:05:48,217 - cloud_storage - INFO - Uploading results/summary.json to debug_run/results/summary.json
2025-05-15 18:05:48,935 - cloud_storage - INFO - Successfully uploaded and shared results/summary.json
2025-05-15 18:05:48,937 - cloud_storage - INFO - Uploading results/report.md to debug_run/results/report.md
2025-05-15 18:05:49,754 - cloud_storage - INFO - Successfully uploaded and shared results/report.md
2025-05-15 18:05:49,754 - cloud_storage - INFO - Uploading results/report.txt to debug_run/results/report.txt
2025-05-15 18:05:50,368 - cloud_storage - INFO - Successfully uploaded and shared results/report.txt
2025-05-15 18:05:50,369 - cloud_storage - INFO - Processing directory: figures
2025-05-15 18:05:50,369 - cloud_storage - INFO - Found 6 files in figures
2025-05-15 18:05:50,370 - cloud_storage - INFO - Uploading figures/duration_vs_enrollment.png to debug_run/figures/duration_vs_enrollment.png
2025-05-15 18:05:51,059 - cloud_storage - INFO - Successfully uploaded and shared figures/duration_vs_enrollment.png
2025-05-15 18:05:51,060 - cloud_storage - INFO - Uploading figures/test_cloud_storage.png to debug_run/figures/test_cloud_storage.png
2025-05-15 18:05:51,801 - cloud_storage - INFO - Successfully uploaded and shared figures/test_cloud_storage.png
2025-05-15 18:05:51,802 - cloud_storage - INFO - Uploading figures/modality_distribution.png to debug_run/figures/modality_distribution.png
2025-05-15 18:05:52,621 - cloud_storage - INFO - Successfully uploaded and shared figures/modality_distribution.png
2025-05-15 18:05:52,622 - cloud_storage - INFO - Uploading figures/top_sponsors.png to debug_run/figures/top_sponsors.png
2025-05-15 18:05:53,336 - cloud_storage - INFO - Successfully uploaded and shared figures/top_sponsors.png
2025-05-15 18:05:53,336 - cloud_storage - INFO - Uploading figures/enrollment_distribution.png to debug_run/figures/enrollment_distribution.png
2025-05-15 18:05:55,180 - cloud_storage - INFO - Successfully uploaded and shared figures/enrollment_distribution.png
2025-05-15 18:05:55,181 - cloud_storage - INFO - Uploading figures/trial_timeline.png to debug_run/figures/trial_timeline.png
2025-05-15 18:05:55,897 - cloud_storage - INFO - Successfully uploaded and shared figures/trial_timeline.png
2025-05-15 18:05:55,897 - cloud_storage - INFO - Completed uploading 11 files for run ID: debug_run
2025-05-15 18:05:55,898 - visualization-test - INFO - ✅ Uploaded 11 files to Cloud Storage:
2025-05-15 18:05:55,898 - visualization-test - INFO -   - data/clinical_trials.csv: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/clinical_trials.csv
2025-05-15 18:05:55,898 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:55,898 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:55,898 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:55,901 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:55,901 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:55,902 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:56,150 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:56,257 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:05:56,345 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/clinical_trials.csv
2025-05-15 18:05:56,345 - visualization-test - INFO -   - data/interventions.csv: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/interventions.csv
2025-05-15 18:05:56,345 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:56,345 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:56,346 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:56,349 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:56,349 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:56,350 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:56,736 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:56,808 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:05:56,937 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/data/interventions.csv
2025-05-15 18:05:56,938 - visualization-test - INFO -   - results/summary.json: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/summary.json
2025-05-15 18:05:56,938 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:56,938 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:56,938 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:56,942 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:56,942 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:56,942 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:57,433 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:57,500 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:05:57,575 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/summary.json
2025-05-15 18:05:57,576 - visualization-test - INFO -   - results/report.md: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.md
2025-05-15 18:05:57,576 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:57,576 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:57,577 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:57,580 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:57,580 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:57,580 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:57,836 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:57,971 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:05:58,055 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.md
2025-05-15 18:05:58,055 - visualization-test - INFO -   - results/report.txt: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.txt
2025-05-15 18:05:58,056 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:58,056 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:58,056 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:58,059 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:58,059 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:58,059 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:58,318 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:58,419 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:05:58,514 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/results/report.txt
2025-05-15 18:05:58,514 - visualization-test - INFO -   - figures/duration_vs_enrollment.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/duration_vs_enrollment.png
2025-05-15 18:05:58,514 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:58,514 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:58,515 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:58,517 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:58,518 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:58,518 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:58,902 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:58,998 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:05:59,087 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/duration_vs_enrollment.png
2025-05-15 18:05:59,087 - visualization-test - INFO -   - figures/test_cloud_storage.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/test_cloud_storage.png
2025-05-15 18:05:59,088 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:59,088 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:59,088 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:59,091 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:59,091 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:59,092 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:59,409 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:59,489 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:05:59,609 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/test_cloud_storage.png
2025-05-15 18:05:59,610 - visualization-test - INFO -   - figures/modality_distribution.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/modality_distribution.png
2025-05-15 18:05:59,610 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:05:59,610 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:59,610 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:05:59,613 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:05:59,614 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:05:59,614 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:05:59,860 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:05:59,933 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:06:00,012 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/modality_distribution.png
2025-05-15 18:06:00,012 - visualization-test - INFO -   - figures/top_sponsors.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/top_sponsors.png
2025-05-15 18:06:00,012 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:06:00,013 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:06:00,013 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:06:00,016 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:06:00,016 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:06:00,016 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:06:00,405 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:06:00,495 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:06:00,620 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/top_sponsors.png
2025-05-15 18:06:00,621 - visualization-test - INFO -   - figures/enrollment_distribution.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/enrollment_distribution.png
2025-05-15 18:06:00,621 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:06:00,621 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:06:00,621 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:06:00,624 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:06:00,624 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:06:00,625 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:06:00,906 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:06:01,006 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:06:01,161 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/enrollment_distribution.png
2025-05-15 18:06:01,161 - visualization-test - INFO -   - figures/trial_timeline.png: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/trial_timeline.png
2025-05-15 18:06:01,161 - cloud_storage - INFO - Initializing Google Cloud Storage with bucket: clinicaltrialsv1
2025-05-15 18:06:01,161 - cloud_storage - INFO - Looking for credentials at: /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:06:01,162 - cloud_storage - INFO - Loading credentials from /Users/rodmehrbasidj/Documents/TrialsV2/CleanTrialsV2/clinicaltrials-v1-9acf57d456a4.json
2025-05-15 18:06:01,164 - cloud_storage - INFO - Loaded credentials for project: clinicaltrials-v1
2025-05-15 18:06:01,164 - cloud_storage - INFO - Creating storage client with explicit credentials for project clinicaltrials-v1
2025-05-15 18:06:01,165 - cloud_storage - INFO - Checking if bucket clinicaltrialsv1 exists
2025-05-15 18:06:01,463 - cloud_storage - INFO - Using existing bucket: clinicaltrialsv1
2025-05-15 18:06:01,538 - cloud_storage - INFO - Successfully verified bucket access
2025-05-15 18:06:01,603 - visualization-test - INFO -   - Retrieved URL: https://storage.googleapis.com/clinicaltrialsv1/debug_run/figures/trial_timeline.png
2025-05-15 18:06:01,603 - visualization-test - INFO - === Test Summary ===
2025-05-15 18:06:01,603 - visualization-test - INFO - matplotlib_backend: ✅ PASS
2025-05-15 18:06:01,604 - visualization-test - INFO - visualization_module: ✅ PASS
2025-05-15 18:06:01,604 - visualization-test - INFO - cloud_storage: ✅ PASS
2025-05-15 18:06:01,604 - visualization-test - INFO - Essential tests passed! Continue with local development.
